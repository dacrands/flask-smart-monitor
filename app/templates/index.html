{% extends "base.html" %}

{% block content %}

<main class="main">        
  <div class="dash">         
    {% include "_weather.html" %}                         
    {% include "_stocks.html" %}   
                              
  </div>  

  <div id="player"></div>

  {% include "_inputs.html" %}                             
</main>








<div class="hide" style="display:none;">{{YTembed}}</div>


    
    <script>
      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          playerVars: { 'autoplay': 1, 'controls': 0, 'showinfo': 0, 'rel': 0},
          height: 'auto',
          width: '100%',
          videoId: document.querySelector('.hide').innerText,
          events: {
            'onReady': onPlayerReady,
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
        event.target.mute();
        event.target.seekTo(90);
      }


      var inputSelect = document.querySelector('.inputs select');
      inputSelect.addEventListener('change', (e) => {
        player.loadVideoById(e.target.value)
      });

      var embedButton = document.getElementById('embedButton');
      let embedInput = document.getElementById('embedInput');
      embedButton.addEventListener('click', (e) => {
        player.loadVideoById(embedInput.value)
      })

      var toolSpan = document.querySelector('.tool span');      
      var inputs = document.querySelector('.inputs');
      toolSpan.addEventListener('click', () => {
        console.log('clicked');
        inputs.classList.toggle('inputs--show');
      });
    </script>
{% endblock %}
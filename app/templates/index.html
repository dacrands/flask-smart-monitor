{% extends "base.html" %}

{% block content %}

<main class="main">
    
    
    <div class="dash">        
        <section class="weather">
          <div>
              <h1 id="temp">{{weatherData.currently.temperature}} <sup>&deg;</sup> </h1>
          </div>          
          <div>
              <p id="summary">{{weatherData.currently.summary}}</p>  
              <p>Humidity: {{ weatherData.currently.humidity * 100 }}%</p>
          </div>          
        </section>
        <section class="inputs">
            <label>Select a video
            <select name="" id="">
              <option value="bdnHKdb-Oss">Fish</option>
              <option value="bjRw0-5CYWo">Beach</option>
              <option value="ht2TigJp88w">Space</option>
              <option value="iGpuQ0ioPrM">Glitter</option>
              <option value="sadf">BReal</option>
            </select>
            </label>
            <label>Add an embed
                <input type="text" name="embed" id="embedInput">
                <button for=embed id="embedButton">Submit</button>
                </label>                      
          </section>        
        </div>  

        <div id="player"></div>

        <div class="ticker">
            <section class="stocks">  
                {% for stock in ['F', 'FB', 'AAPL', 'VT', 'SIRI', 'AMD', 'FIT'] %}
                <div class="stocks__quote">
                  <strong>
                      <p>{{ stocksData[stock]['quote']['companyName'] }}</p>
                  </strong>
                    
                    <p>{{ stocksData[stock]['quote']['latestPrice'] }}</p>
                </div>  
                {% endfor %}
              </section>
        </div>  
</main>








<div class="hide" style="display:none;">{{YTembed}}</div>


    
    <script>
      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          playerVars: { 'autoplay': 1, 'controls': 0, 'showinfo': 0, 'rel': 0},
          height: 'auto',
          width: '100%',
          videoId: document.querySelector('.hide').innerText,
          events: {
            'onReady': onPlayerReady,
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
        event.target.mute();
        event.target.seekTo(90);
      }


      var inputs = document.querySelector('.inputs select');
      inputs.addEventListener('change', (e) => {
        player.loadVideoById(e.target.value)
      });

      var embedButton = document.getElementById('embedButton');
      let embedInput = document.getElementById('embedInput');
      embedButton.addEventListener('click', (e) => {
        player.loadVideoById(embedInput.value)
      })

    </script>
{% endblock %}